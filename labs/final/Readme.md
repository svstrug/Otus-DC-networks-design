## Проектная работа "Построение распределенного ПАК 374-ФЗ для федерального оператора связи"

### Оглавление
1. [Цель](#цель)
2. [Задачи](#задачи)
3. [Сетевая топология](#Сетевая-топология)
4. [План IP адресации](#План-IP-адресации)
5. [Конфигурация оборудования](#Конфигурация-оборудования)

### Цель:
- Разработка архитектуры закрытого сетевого сегмента с использованием VXLAN\EVPN обеспечивающего L2/L3 транспорт для ПАК 374-ФЗ размещенного в двух георазнесенных ЦОД.

### Задачи:

- Проектирование отказоустойчивой и масштабируемой сетевой топологии для двух ЦОД
- Проектирование DCI interconnection 
- Проектирование адресного пространства
- Проектирование сетевых протоколов обеспечивающих оптимальную загрузку линий связи, балансировку трафика, безопасность и быструю сходимость.

### Сетевая топология:

В связи с направлением 90% потоков трафика Запад-Восток для подключения ПАК выбрана сетевая топология Clos. Для обеспечения необходимых L2/L3 сетевых сервисов и дополнительных функций выбрана технология VXLAN EVPN.<br>
DCI interconnection построен на Border Spine коммутаторах в целях оптимизации финансовых затрат на оборудование. Линии связи POD1 и POD2 для Border Spine обеспечиваются поверх двух DWDM каналов между площадками дополнительно зарезервированных средствами транспортной сети оператора связи. В качестве логической архитектуры для DCI выбрана архитектура Multipod<br> 
Маршрутизаторы оператора связи подключенные в Border Spine обеспечивают внешнюю для VxLAN фабрики (изолированную от Интернет) IP связность (L3VPN) которая необходима для организации удаленного управления и передачи ~10% Data трафика до удаленных компонентов комплекса и потребителей. Коммуникация с оборудованием оператора связи организована по протоколу eBGP с настроенным контролем приема/передачи маршрутной информации (import/export route policy).<br>   

![image](final_project.png)

### План IP адресации:

<details>
<summary> POD1 </summary>

Device|Interface|IP Address|Subnet Mask|Default GW
---|---|---|---|---
POD1-R-1|Lo1|1.1.1.1|255.255.255.255|-
-|Eth1|10.4.1.11|255.255.255.254|-
POD1-R-2|Lo1|1.1.1.2|255.255.255.255|-
-|Eth1|10.4.2.11|255.255.255.254|-
POD1-Spine-1|Lo1|10.0.1.0|255.255.255.255|-
-|Lo2|10.2.1.0|255.255.255.255|-
-|Eth1|10.4.1.0|255.255.255.254|-
-|Eth2|10.4.1.2|255.255.255.254|-
-|Eth3|10.4.1.4|255.255.255.254|-
-|Eth4|10.4.1.6|255.255.255.254|-
-|Eth5|10.4.1.8|255.255.255.254|-
-|Eth6|10.4.1.10|255.255.255.254|-
POD1-Spine-2|Lo1|10.0.2.0|255.255.255.255|-
-|Lo2|10.2.2.0|255.255.255.255|-
-|Eth1|10.4.2.0|255.255.255.254|-
-|Eth2|10.4.2.2|255.255.255.254|-
-|Eth3|10.4.2.4|255.255.255.254|-
-|Eth4|10.4.2.6|255.255.255.254|-
-|Eth5|10.4.2.8|255.255.255.254|-
-|Eth6|10.4.2.10|255.255.255.254|-
POD1-Leaf-1|Lo1|10.0.0.1|255.255.255.255|-
-|Lo2|10.2.0.1|255.255.255.255|-
-|Eth1|10.4.1.1|255.255.255.254|-
-|Eth2|10.4.2.1|255.255.255.254|-
-|vlan10|192.168.10.1|255.255.255.0|-
-|vlan11|192.168.11.1|255.255.255.0|-
POD1-Leaf-2|Lo1|10.0.0.2|255.255.255.255|-
-|Lo2|10.2.0.2|255.255.255.255|-
-|Eth1|10.4.1.3|255.255.255.254|-
-|Eth2|10.4.2.3|255.255.255.254|-
-|vlan10|192.168.10.1|255.255.255.0|-
-|vlan11|192.168.11.1|255.255.255.0|-
POD1-Leaf-3|Lo1|10.0.0.3|255.255.255.255|-
-|Lo2|10.2.0.3|255.255.255.255|-
-|Eth1|10.4.1.5|255.255.255.254|-
-|Eth2|10.4.2.5|255.255.255.254|-
-|vlan10|192.168.10.1|255.255.255.0|-
-|vlan11|192.168.11.1|255.255.255.0|-
POD1-Leaf-4|Lo1|10.0.0.4|255.255.255.255|-
-|Lo2|10.2.0.4|255.255.255.255|-
-|Eth1|10.4.1.7|255.255.255.254|-
-|Eth2|10.4.2.7|255.255.255.254|-
-|vlan10|192.168.10.1|255.255.255.0|-
-|vlan11|192.168.11.1|255.255.255.0|-
POD1-MngSW-1|vlan10|192.168.10.2|255.255.255.0|192.168.10.1
POD1-MngSW-2|vlan10|192.168.10.3|255.255.255.0|192.168.10.1
POD1-VPC1|Eth0|192.168.10.11|255.255.255.0|192.168.10.1
POD1-VPC2|Eth0|192.168.12.1|255.255.255.0|-
POD1-VPC3|Eth0|192.168.11.11|255.255.255.0|192.168.11.1
POD1-VPC4|Eth0|192.168.12.2|255.255.255.0|-
</details>

<details>
<summary> POD2 </summary>

Device|Interface|IP Address|Subnet Mask|Default GW
---|---|---|---|---
POD2-R-1|Lo1|2.2.2.1|255.255.255.255|-
-|Eth1|10.20.1.11|255.255.255.254|-
POD2-R-2|Lo1|2.2.2.2|255.255.255.255|-
-|Eth1|10.20.2.11|255.255.255.254|-
POD2-Spine-1|Lo1|10.16.1.0|255.255.255.255|-
-|Lo2|10.18.1.0|255.255.255.255|-
-|Eth1|10.20.1.0|255.255.255.254|-
-|Eth2|10.20.1.2|255.255.255.254|-
-|Eth3|10.20.1.4|255.255.255.254|-
-|Eth4|10.20.1.6|255.255.255.254|-
-|Eth5| 10.4.1.9|255.255.255.254|-
-|Eth6|10.20.1.10|255.255.255.254|-
POD2-Spine-2|Lo1|10.16.2.0|255.255.255.255|-
-|Lo2|10.18.2.0|255.255.255.255|-
-|Eth1|10.20.2.0|255.255.255.254|-
-|Eth2|10.20.2.2|255.255.255.254|-
-|Eth3|10.20.2.4|255.255.255.254|-
-|Eth4|10.20.2.6|255.255.255.254|-
-|Eth5|10.4.2.9|255.255.255.254|-
-|Eth6|10.20.2.10|255.255.255.254|-
POD2-Leaf-1|Lo1|10.16.0.1|255.255.255.255|-
-|Lo2|10.18.0.1|255.255.255.255|-
-|Eth1|10.20.1.1|255.255.255.254|-
-|Eth2|10.20.2.1|255.255.255.254|-
-|vlan100|192.168.100.1|255.255.255.0|-
-|vlan111|192.168.111.1|255.255.255.0|-
POD2-Leaf-2|Lo1|10.16.0.2|255.255.255.255|-
-|Lo2|10.18.0.2|255.255.255.255|-
-|Eth1|10.20.1.3|255.255.255.254|-
-|Eth2|10.20.2.3|255.255.255.254|-
-|vlan100|192.168.100.1|255.255.255.0|-
-|vlan111|192.168.111.1|255.255.255.0|-
POD2-Leaf-3|Lo1|10.16.0.3|255.255.255.255|-
-|Lo2|10.18.0.3|255.255.255.255|-
-|Eth1|10.20.1.5|255.255.255.254|-
-|Eth2|10.20.2.5|255.255.255.254|-
-|vlan100|192.168.100.1|255.255.255.0|-
-|vlan111|192.168.111.1|255.255.255.0|-
POD2-Leaf-4|Lo1|10.16.0.4|255.255.255.255|-
-|Lo2|10.18.0.4|255.255.255.255|-
-|Eth1|10.20.1.7|255.255.255.254|-
-|Eth2|10.20.2.7|255.255.255.254|-
-|vlan100|192.168.100.1|255.255.255.0|-
-|vlan111|192.168.111.1|255.255.255.0|-
POD2-MngSW-1|vlan100| 192.168.100.2|255.255.255.0| 192.168.100.1
POD2-MngSW-2|vlan100| 192.168.100.3|255.255.255.0| 192.168.100.1
POD2-VPC5|Eth0|192.168.100.11|255.255.255.0|192.168.100.1
POD2-VPC6|Eth0|192.168.12.3|255.255.255.0|-
POD2-VPC7|Eth0|192.168.111.11|255.255.255.0|192.168.111.1
POD2-VPC8|Eth0|192.168.12.4|255.255.255.0|-
</details>

Предназначение внешних (route type 5) и клиентских адресов.<br>
Адреса 1.1.1.1/32, 1.1.1.2/32, 2.2.2.1/32, 2.2.2.2/32 анонсируемые с маршрутизаторов оператора связи эмулируют подсети внешних компонентов и потребителей.<br>
Для управления серверами выбрыны маршрутизируемые по L3 подсети POD1 192.168.10.0/24 (vlan 10) и POD2 192.168.100.0/24 (vlan 100).<br>
Для передачи данных за пределы комплекса выбрыны маршрутизируемые по L3 подсети POD1 192.168.11.0/24 (vlan 11) и POD2 192.168.111.0/24 (vlan 111).<br>
Для передачи контента внутри фабрики по L2 выбраны подсети общие для обоих POD 192.168.12.0/24 (vlan 12), POD 192.168.13.0/24 (vlan 13), POD 192.168.14.0/24 (vlan 14), POD 192.168.15.0/24 (vlan 15), POD 192.168.16.0/24 (vlan 16), POD 192.168.17.0/24 (vlan 17).<br>
В целях упрощения и сокращения конфигурации проекта часть подсетей для внутреннего L2 взаимодействия POD 192.168.13.0/24 - POD 192.168.17.0/24 на VPC не настроены, т.к. их взаимодействие будет аналогично приведенному взаимодействию хостов в подсети 192.168.12.0/24.<br>

### Конфигурация оборудования:

Для реализации VXLAN EVPN 
